#!/bin/bash
# parameter 1: process name

process=$1

WAIT_COUNT=0
while [ $WAIT_COUNT -lt 120 ]; do
	pgrep $process >/dev/null 2>&1
	ret=$?
	if [ "$ret" != "0" ]; then
		echo "process $process already exit"
		exit 0
	fi
	sleep 1
	echo "wait process $process exit..."
	((WAIT_COUNT++))
done

<<<<<<< HEAD
echo "process $process didn't exit after 30 seconds"
=======
echo "process $process didn't exit after 120 seconds, current processlist: $(pgrep $process)"
>>>>>>> 3faaeb6da (tls(dm): support init tls without client kay/certs (#5393))
exit 1
